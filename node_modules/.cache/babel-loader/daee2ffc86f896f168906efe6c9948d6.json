{"ast":null,"code":"import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport qs from \"querystring\";\nimport dotenv from \"dotenv\";\n\nclass Auth extends Component {\n  constructor(domain) {\n    debugger;\n    this.domain = domain || process.env.REACT_APP_API;\n    this.login = this.login.bind(this);\n  }\n\n  login(username, password) {\n    return axios({\n      method: \"POST\",\n      url: \"/auth/login\",\n      baseURL: this.domain,\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      data: qs.stringify({\n        username,\n        password\n      })\n    }).then(response => {\n      this.setUser(response.data);\n    });\n  }\n\n  signup({\n    username,\n    password,\n    firstname,\n    lastname,\n    email\n  }) {\n    return axios({\n      method: \"POST\",\n      url: \"/auth/signup\",\n      baseURL: this.domain,\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      data: qs.stringify({\n        username,\n        firstname,\n        lastname,\n        password,\n        email\n      })\n    }).then(response => {\n      this.setUser(response.data);\n    });\n  }\n\n  loggedIn() {\n    const user = this.getUser();\n    return !!user;\n  }\n\n  setUser(user) {\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n\n  getUser() {\n    return JSON.parse(localStorage.getItem('user'));\n  }\n\n  logout() {\n    return axios({\n      baseURL: this.domain,\n      url: \"/auth/logout\"\n    }).then(res => {\n      localStorage.removeItem('user');\n    });\n  }\n\n}\n\nexport default Auth;","map":{"version":3,"sources":["/Users/mariusgrondahl/Documents/GitHub/lab-react-ironbeers/ironbeersreact/src/utils/Auth.js"],"names":["React","Component","axios","qs","dotenv","Auth","constructor","domain","process","env","REACT_APP_API","login","bind","username","password","method","url","baseURL","headers","data","stringify","then","response","setUser","signup","firstname","lastname","email","loggedIn","user","getUser","localStorage","setItem","JSON","parse","getItem","logout","res","removeItem"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,aAAf;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAGA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AACzBK,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB;AACA,SAAKA,MAAL,GAAcA,MAAM,IAAIC,OAAO,CAACC,GAAR,CAAYC,aAApC;AACA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACH;;AAEDD,EAAAA,KAAK,CAACE,QAAD,EAAWC,QAAX,EAAqB;AACtB,WAAOZ,KAAK,CAAC;AACTa,MAAAA,MAAM,EAAE,MADC;AAETC,MAAAA,GAAG,EAAE,aAFI;AAGTC,MAAAA,OAAO,EAAE,KAAKV,MAHL;AAITW,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAJA;AAKTC,MAAAA,IAAI,EAAEhB,EAAE,CAACiB,SAAH,CAAa;AAACP,QAAAA,QAAD;AAAWC,QAAAA;AAAX,OAAb;AALG,KAAD,CAAL,CAONO,IAPM,CAOAC,QAAD,IAAa;AACf,WAAKC,OAAL,CAAaD,QAAQ,CAACH,IAAtB;AACH,KATM,CAAP;AAUH;;AAEDK,EAAAA,MAAM,CAAC;AAACX,IAAAA,QAAD;AAAWC,IAAAA,QAAX;AAAqBW,IAAAA,SAArB;AAAgCC,IAAAA,QAAhC;AAA0CC,IAAAA;AAA1C,GAAD,EAAmD;AACrD,WAAOzB,KAAK,CAAC;AACTa,MAAAA,MAAM,EAAE,MADC;AAETC,MAAAA,GAAG,EAAE,cAFI;AAGTC,MAAAA,OAAO,EAAE,KAAKV,MAHL;AAITW,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAJA;AAKTC,MAAAA,IAAI,EAAEhB,EAAE,CAACiB,SAAH,CAAa;AAACP,QAAAA,QAAD;AAAWY,QAAAA,SAAX;AAAsBC,QAAAA,QAAtB;AAAgCZ,QAAAA,QAAhC;AAA0Ca,QAAAA;AAA1C,OAAb;AALG,KAAD,CAAL,CAONN,IAPM,CAOAC,QAAD,IAAa;AACf,WAAKC,OAAL,CAAaD,QAAQ,CAACH,IAAtB;AACH,KATM,CAAP;AAUH;;AAEDS,EAAAA,QAAQ,GAAE;AACN,UAAMC,IAAI,GAAG,KAAKC,OAAL,EAAb;AACA,WAAO,CAAC,CAACD,IAAT;AACH;;AAEDN,EAAAA,OAAO,CAACM,IAAD,EAAM;AACTE,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACb,SAAL,CAAeS,IAAf,CAA7B;AACH;;AAEDC,EAAAA,OAAO,GAAE;AACL,WAAOG,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CAAP;AACH;;AAEDC,EAAAA,MAAM,GAAE;AACL,WAAOlC,KAAK,CAAC;AACRe,MAAAA,OAAO,EAAE,KAAKV,MADN;AAERS,MAAAA,GAAG,EAAE;AAFG,KAAD,CAAL,CAILK,IAJK,CAICgB,GAAD,IAAQ;AACVN,MAAAA,YAAY,CAACO,UAAb,CAAwB,MAAxB;AACH,KANK,CAAP;AAOF;;AAtDwB;;AAyD7B,eAAejC,IAAf","sourcesContent":["import React, {Component} from \"react\";\nimport axios from \"axios\";\nimport qs from \"querystring\";\nimport dotenv from \"dotenv\";\n\n\nclass Auth extends Component {\n    constructor(domain) {\n        debugger\n        this.domain = domain || process.env.REACT_APP_API;\n        this.login = this.login.bind(this);\n    }\n\n    login(username, password) {\n        return axios({\n            method: \"POST\",\n            url: \"/auth/login\",\n            baseURL: this.domain,\n            headers: { 'content-type': 'application/x-www-form-urlencoded' },\n            data: qs.stringify({username, password}),\n        })\n        .then((response)=> {\n            this.setUser(response.data)\n        })\n    }\n\n    signup({username, password, firstname, lastname, email}) {\n        return axios({\n            method: \"POST\",\n            url: \"/auth/signup\",\n            baseURL: this.domain,\n            headers: { 'content-type': 'application/x-www-form-urlencoded' },\n            data: qs.stringify({username, firstname, lastname, password, email}),\n        })\n        .then((response)=> {\n            this.setUser(response.data);\n        })\n    }\n\n    loggedIn(){\n        const user = this.getUser()\n        return !!user; \n    }\n\n    setUser(user){\n        localStorage.setItem('user', JSON.stringify(user));\n    }\n\n    getUser(){\n        return JSON.parse(localStorage.getItem('user'));\n    }\n    \n    logout(){\n       return axios({\n            baseURL: this.domain,\n            url: \"/auth/logout\"\n        })\n        .then((res)=> {\n            localStorage.removeItem('user');\n        })\n    }    \n}\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}